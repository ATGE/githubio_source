---
title: "Getting started with Firewalls"
description: "<p>SoftLayer provides two flavors of firewall service that share some API components. Single device firewall solutions a"
date: "2013-06-04"
author: "phil"
tags:
    - "blog"
---

<p>SoftLayer provides two flavors of firewall service that share some API components. Single device firewall solutions are interacted with through the <a href="/reference/services/SoftLayer_Network_Component_Firewall/">SoftLayer_Network_Component_Firewall</a> service and VLAN firewalls can be accessed with the <a href="/reference/services/SoftLayer_Network_Firewall_AccessControlList/">SoftLayer_Network_Firewall_AccessControlList</a> service.</p>
<h1>Single device firewalls</h1>
<h2>Listing</h2>
<p>As <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall/">SoftLayer_Network_Component_Firewall</a> objects are attached to the device they are providing protection for. The best way to retrieve a list of all firewalls protecting dedicated servers is a call to <a href="/reference/services/SoftLayer_Account/getHardware">SoftLayer_Account::getHardware</a> with an object mask for "firewallServiceComponent". A list of firewalls protecting Cloud Computing Instances can be found with <a href="/reference/services/SoftLayer_Account/getVirtualGuests">SoftLayer_Account::getVirtualGuests</a> using the same object mask.</p>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$client</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Account'</span><span style="color: #339933;">,</span> <span style="color: #000000; font-weight: bold;">null</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$objectMask</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">"mask.firewallServiceComponent"</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$client</span><span style="color: #339933;">-></span><span style="color: #004000;">setObjectMask</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$objectMask</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$domains</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$client</span><span style="color: #339933;">-></span><span style="color: #004000;">getHardware</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a href="http://www.php.net/print_r"><span style="color: #990000;">print_r</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$domains</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<h2>Rules</h2>
<h3>Listing</h3>
<p>Each <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall/">SoftLayer_Network_Component_Firewall</a> object stores its rules in the "rules" relational property. This property contains an array of <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall_Rule/">SoftLayer_Network_Component_Firewall_Rule</a> objects. These objects define the firewall rule and how it will behave. We can retrieve a list of these rules with <a href="/reference/services/SoftLayer_Network_Component_Firewall/getRules">SoftLayer_Network_Component_Firewall::getRules</a>.</p>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$client</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Network_Component_Firewall'</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">12345</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$rules</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$client</span><span style="color: #339933;">-></span><span style="color: #004000;">getRules</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a href="http://www.php.net/print_r"><span style="color: #990000;">print_r</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<h3>Modification</h3>
<p>A firewall's ruleset is modified by passing a <a href="/reference/datatypes/SoftLayer_Network_Firewall_Update_Request/">SoftLayer_Network_Firewall_Update_Request</a> template object to <a href="/reference/services/SoftLayer_Network_Firewall_Update_Request/createObject">SoftLayer_Network_Firewall_Update_Request::createObject</a>. The entire ruleset is rewritten with each update request. This means it is necessary to include all past unchanged  rules along with any modifications or additions. This is easily accomplished by pulling in the existing rules as described above then modifying the gathered array.<br />
Each <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall_Update_Request_Rule/">SoftLayer_Network_Component_Firewall_Update_Request_Rule</a> object requires:</p>
<ul>
<li>action - permit or deny</li>
<li>destinationIpAddress - destination address </li>
<li>destinationIpSubnetMask - subnet mask for destination</li>
<li>sourceIpAddress - originating address</li>
<li>sourceIpSubnetMask - subnet mask for origin address</li>
<li>protocol - tcp/udp </li>
<li>destinationPortRangeStart - first port the rule will effect</li>
<li>destinationPortRangeEnd - last port the rule will effect</li>
<li>orderValue - order in which rules are applied (lower is sooner)</li>
</ul>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$firewallId</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">123456</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$firewallClient</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Network_Component_Firewall'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$firewallId</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$rules</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$firewallClient</span><span style="color: #339933;">-></span><span style="color: #004000;">getRules</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Adding a rule</span>
<span style="color: #000088;">$newRule</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> stdClass<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">action</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'permit'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationIpAddress</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'172.16.0.1'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationIpSubnetMask</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'255.255.255.255'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationPortRangeStart</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationPortRangeEnd</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">25</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">orderValue</span> <span style="color: #339933;">=</span> <a href="http://www.php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span>rules<span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">protocol</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'tcp'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpAddress</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'192.168.1.1'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpSubnetMask</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'255.255.255.255'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$rules</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$newRule</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Modifying a rule</span>
<span style="color: #000088;">$ipToAllow</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'192.168.1.2'</span><span style="color: #339933;">;</span>
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$key</span> <span style="color: #339933;">=></span> <span style="color: #000088;">$rule</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpAddress</span> <span style="color: #339933;">==</span> <span style="color: #000088;">$ipToAllow</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$rules</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$key</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">-></span><span style="color: #004000;">action</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'deny'</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Deleting a rule</span>
<span style="color: #000088;">$ipToDelete</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'192.168.1.3'</span><span style="color: #339933;">;</span>
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$key</span> <span style="color: #339933;">=></span> <span style="color: #000088;">$rule</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">if</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$rule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpAddress</span> <span style="color: #339933;">==</span> <span style="color: #000088;">$ipToDelete</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <a href="http://www.php.net/unset"><span style="color: #990000;">unset</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$key</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<p>The update request object requires the following properties:</p>
<ul>
<li>networkComponentFirewallId - identifier of the firewall object</li>
<li>rules - an array of <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall_Update_Request_Rule/">SoftLayer_Network_Component_Firewall_Update_Request_Rule</a> objects</li>
</ul>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$updateRequestClient</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Network_Firewall_Update_Request'</span><span style="color: #339933;">,</span> <span style="color: #000000; font-weight: bold;">Null</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$updateRequestTemplate</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> stdClass<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$updateRequestTemplate</span><span style="color: #339933;">-></span><span style="color: #004000;">networkComponentFirewallId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$firewallId</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$updateRequestTemplate</span><span style="color: #339933;">-></span><span style="color: #004000;">rules</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$rules</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$updateRequestClient</span><span style="color: #339933;">-></span><span style="color: #004000;">createObject</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$updateRequestTemplate</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a href="http://www.php.net/print_r"><span style="color: #990000;">print_r</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p><a href="/reference/services/SoftLayer_Network_Firewall_Update_Request/createObject">SoftLayer_Network_Firewall_Update_Request::createObject</a> will return a fully populated <a href="/reference/datatypes/SoftLayer_Network_Firewall_Update_Request/">SoftLayer_Network_Firewall_Update_Request</a> object and it will enter the update queue. The request is typically processed within 60 seconds.</p>
<h1>VLAN routed firewalls</h1>
<p>VLAN routed firewalls provide protection to an entire <a href="/reference/datatypes/SoftLayer_Network_Vlan/">SoftLayer_Network_Vlan</a> rather than a specific server. Many of the concepts from single device firewalls translate to VLAN routed firewalls; however, there are some small differences. The interaction point for VLAN routed firewalls is the <a href="/reference/services/SoftLayer_Network_Firewall_AccessControlList/">SoftLayer_Network_Firewall_AccessControlList</a> service.</p>
<p>Each VLAN has two types of firewallInterface: 'inside' and 'outisde'. firewallContextAccessControlLists are organized by a direction of 'in' or 'out'. Currently the SoftLayer Platform supports the 'outside' firewallInterfaces and the 'in' ACLs.</p>
<h2>Listing</h2>
<p>A list of all VLAN routed firewalls can be gathered with a call to <a href="/reference/services/SoftLayer_Account/getNetworkVlans">SoftLayer_Account::getNetworkVlans</a> with an object mask for firewallInterfaces.firewallContextAccessControlLists.</p>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$client</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Account'</span><span style="color: #339933;">,</span> <span style="color: #000000; font-weight: bold;">null</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$objectMask</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">"mask.firewallInterfaces.firewallContextAccessControlLists"</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$client</span><span style="color: #339933;">-></span><span style="color: #004000;">setObjectMask</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$objectMask</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$vlans</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$client</span><span style="color: #339933;">-></span><span style="color: #004000;">getNetworkVlans</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$vlans</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$vlan</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$vlan</span><span style="color: #339933;">-></span><span style="color: #004000;">firewallInterfaces</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <a href="http://www.php.net/print_r"><span style="color: #990000;">print_r</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$vlan</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<h2>Rules</h2>
<h3>Listing</h3>
<p>Each <a href="/reference/datatypes/SoftLayer_Network_Firewall_AccessControlList/">SoftLayer_Network_Firewall_AccessControlList</a> object stores its rules in the "rules" relational property. This property contains an array of <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall_Rule/">SoftLayer_Network_Component_Firewall_Rule</a> objects. These objects define the firewall rule and how it will behave. We can retrieve a list of these rules with <a href="/reference/services/SoftLayer_Network_Firewall_AccessConrtolList/getRules">SoftLayer_Network_Firewall_AccessConrtolList::getRules</a>.</p>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$vlanFirewalId</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1234</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$client</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Network_Firewall_AccessControlList'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$vlanFirewalId</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$rules</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$client</span><span style="color: #339933;">-></span><span style="color: #004000;">getRules</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a href="http://www.php.net/print_r"><span style="color: #990000;">print_r</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<h3>Modification</h3>
<p>A firewall's ruleset is modified by passing a <a href="/reference/datatypes/SoftLayer_Network_Firewall_Update_Request/">SoftLayer_Network_Firewall_Update_Request</a> template object to <a href="/reference/services/SoftLayer_Network_Firewall_Update_Request/createObject">SoftLayer_Network_Firewall_Update_Request::createObject</a>. The entire ruleset is rewritten with each update request. This means it is necessary to include all past unchanged  rules along with any modifications or additions. This is easily accomplished by pulling in the existing rules as described above then modifying the gathered array.<br />
Each <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall_Update_Request_Rule/">SoftLayer_Network_Component_Firewall_Update_Request_Rule</a> object requires:</p>
<ul>
<li>action - permit or deny</li>
<li>destinationIpAddress - destination address</li>
<li>destinationIpSubnetMask - subnet mask for destination</li>
<li>sourceIpAddress - originating address</li>
<li>sourceIpSubnetMask - subnet mask for origin address</li>
<li>protocol - tcp/udp </li>
<li>destinationPortRangeStart - first port the rule will effect</li>
<li>destinationPortRangeEnd - last port the rule will effect</li>
<li>orderValue - order in which rules are applied (lower is sooner)</li>
</ul>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$vlanFirewalId</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">123456</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$firewallClient</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Network_Firewall_AccessControlList'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$vlanFirewalId</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$rules</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$firewallClient</span><span style="color: #339933;">-></span><span style="color: #004000;">getRules</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Adding a rule</span>
<span style="color: #000088;">$newRule</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> stdClass<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">action</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'permit'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationIpAddress</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'172.16.0.1'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationIpSubnetMask</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'255.255.255.255'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationPortRangeStart</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">destinationPortRangeEnd</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">25</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">orderValue</span> <span style="color: #339933;">=</span> <a href="http://www.php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span>rules<span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">protocol</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'tcp'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpAddress</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'192.168.1.1'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$newRule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpSubnetMask</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'255.255.255.255'</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$rules</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$newRule</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Modifying a rule</span>
<span style="color: #000088;">$ipToAllow</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'192.168.1.2'</span><span style="color: #339933;">;</span>
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$key</span> <span style="color: #339933;">=></span> <span style="color: #000088;">$rule</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpAddress</span> <span style="color: #339933;">==</span> <span style="color: #000088;">$ipToAllow</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$rules</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$key</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">-></span><span style="color: #004000;">action</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'deny'</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;">// Deleting a rule</span>
<span style="color: #000088;">$ipToDelete</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'192.168.1.3'</span><span style="color: #339933;">;</span>
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$key</span> <span style="color: #339933;">=></span> <span style="color: #000088;">$rule</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">if</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$rule</span><span style="color: #339933;">-></span><span style="color: #004000;">sourceIpAddress</span> <span style="color: #339933;">==</span> <span style="color: #000088;">$ipToDelete</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <a href="http://www.php.net/unset"><span style="color: #990000;">unset</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$rules</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$key</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre></div>
<p>The update request object requires the following properties:</p>
<ul>
<li>firewallContextAccessControlListId - identifier of the VLAN firewall object</li>
<li>rules - an array of <a href="/reference/datatypes/SoftLayer_Network_Component_Firewall_Update_Request_Rule/">SoftLayer_Network_Component_Firewall_Update_Request_Rule</a> objects</li>
</ul>
<div class="geshifilter">
<pre class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$updateRequestClient</span> <span style="color: #339933;">=</span> SoftLayer_SoapClient<span style="color: #339933;">::</span><span style="color: #004000;">getClient</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SoftLayer_Network_Firewall_Update_Request'</span><span style="color: #339933;">,</span> <span style="color: #000000; font-weight: bold;">Null</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiUser</span><span style="color: #339933;">,</span> <span style="color: #000088;">$apiKey</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$updateRequestTemplate</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> stdClass<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$updateRequestTemplate</span><span style="color: #339933;">-></span> <span style="color: #004000;">firewallContextAccessControlListId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$vlanFirewalId</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$updateRequestTemplate</span><span style="color: #339933;">-></span><span style="color: #004000;">rules</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$rules</span><span style="color: #339933;">;</span>
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$updateRequestClient</span><span style="color: #339933;">-></span><span style="color: #004000;">createObject</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$updateRequestTemplate</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a href="http://www.php.net/print_r"><span style="color: #990000;">print_r</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div>
<p><a href="/reference/services/SoftLayer_Network_Firewall_Update_Request/createObject">SoftLayer_Network_Firewall_Update_Request::createObject</a> will return a fully populated <a href="/reference/datatypes/SoftLayer_Network_Firewall_Update_Request/">SoftLayer_Network_Firewall_Update_Request</a> object and it will enter the update queue. The request is typically processed within 60 seconds.</p>

